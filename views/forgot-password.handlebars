<!DOCTYPE html>
<html lang = "pt-BR">

<head>
    <meta charset = "UTF-8">
    <meta name    = "viewport" content = "width=device-width, initial-scale=1.0">
    <title>Recuperação de Senha</title>
    <link   rel  = "stylesheet" href                                                                     = "/assets/style.css">
    <script src  = "https://cdn.tailwindcss.com"></script>
    <link   href = "https://fonts.googleapis.com/css2?family=Sorts+Mill+Goudy:ital@0;1&display=swap" rel = "stylesheet">
    <script src  = "https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src  = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src  = "https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> <!-- Inclua SweetAlert2 -->
</head>
<style>
    html {
        background-color: rgb(0, 0, 0);
    }
</style>

<body>
    <nav class = "w-full flex justify-center bg-black py-4 shadow-md">
    <div class = "max-w-screen-xl w-full flex items-center justify-between h-20">
    <h1  class = "flex-1 text-white">
    <img src   = "/img/logo.svg" alt = "Logo" onclick = "window.location.href='/'" style = "cursor: pointer;" />
            </h1>
            <ul class = "flex gap-4">
            <ul class = "flex gap-10 text-white">
            <li class = "px-2 py-1 hidden md:block">
            <a  href  = "/#sobre">Quem somos</a>
                    </li>
                    <li class = "px-2 py-1 hidden md:block">
                    <a  href  = "/#equipe">Equipe</a>
                    </li>
                    <li class = "px-2 py-1 hidden md:block">
                    <a  href  = "/#itens">Especialidade</a>
                    </li>
                    <li class = "px-2 py-1 hidden md:block">
                    <a  href  = "/#loc">Localização</a>
                    </li>
                </ul>
                <li>
                    <button onclick = "window.location.href='/login'"
                            class   = "px-5 py-1 bg-white text-black rounded-xl transition-transform duration-300 transform hover:scale-105 hover:bg-gray-100 md:text-lg">
                        Login
                    </button>
                </li>
                <li>
                    <button onclick = "window.location.href='/cadastrar-form'"
                            class   = "px-5 py-1 bg-zinc-900 text-white rounded-xl transition-transform duration-300 transform hover:scale-105 hover:bg-zinc-800 md:text-lg">
                        Cadastro
                    </button>
                </li>
            </ul>
        </div>
    </nav>

    <div class = "h-auto flex items-start justify-center bg-black w-full py-5">
    <div class = "bg-zinc-500/10 flex rounded-2xl shadow-lg max-w-2xl w-full gap-4 md:flex">
            <!-- Coluna da Imagem -->
            <div class = "md:w-1/2 hidden md:block">
            <img class = "rounded-l-2xl w-full h-auto object-cover"
                 src   = "https://img.freepik.com/fotos-gratis/mulher-cuidando-das-unhas_23-2148974583.jpg" alt = "Imagem de Recuperação de Senha">
            </div>

            <!-- Coluna do Formulário -->
            <div class = "p-8 w-full md:w-1/2 flex justify-center items-center">
            <div class = "w-full">
            <h2  class = "font-bold text-2xl text-white text-center md:text-left">Recuperação de Senha</h2>
            <p   class = "text-xs mt-4 text-white text-center md:text-left">Digite seu email para recuperar sua senha.</p>
                    <!-- Formulário de recuperação de senha -->
                    <form   id    = "forgot-password-form" class = "flex flex-col gap-4 mt-4">
                    <input  class = "p-2 rounded-xl border" type = "email" name = "email" id = "email" placeholder = "Email" required>
                    <button type  = "submit" class               = "bg-black rounded-xl text-white py-2 hover:scale-105 duration-300">Recuperar Senha</button>
                    </form>
                    <div class = "btn btn-link mt-5 text-xs border-b border-gray-400 py-4 text-zinc-500 text-center md:text-left">
                    <a   href  = "/login">Voltar ao Login</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
  // Manipulador de envio de formulário de recuperação de senha
  // Manipulador de envio de formulário de recuperação de senha
  // Manipulador de envio de formulário de recuperação de senha
$('#forgot-password-form').on('submit', function (e) {
    e.preventDefault();
    const email = $('#email').val();

    $.post('/forgot-password', { email }, function (response) {
        Swal.fire({
            icon : 'success',
            title: 'E-mail enviado!',
            text : 'E-mail de recuperação enviado com sucesso!',
        });
          // Removido o redirecionamento para a página de login
    }).fail(function (xhr) {
        const errorMessage = xhr.responseJSON?.error || 'Ocorreu um erro ao enviar o e-mail.';
        Swal.fire({
            icon : 'error',
            title: 'Erro!',
            text : errorMessage,
        });
    });
});



            // Exibir SweetAlert2 em caso de erro
        const urlParams  = new URLSearchParams(window.location.search);
        const errorMsg   = urlParams.get('error');
        const successMsg = urlParams.get('success');


  if (errorMsg) {
            Swal.fire({
                icon             : 'error',
                title            : 'Erro!',
                text             : errorMsg,
                confirmButtonText: 'OK'
            });
        }
 if (successMsg) {
        Swal.fire({
            icon             : 'success',
            title            : 'Sucesso!',
            text             : successMsg,
            confirmButtonText: 'OK'
        });
        }
    </script>
</body>

</html>

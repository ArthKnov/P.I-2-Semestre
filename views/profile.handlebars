<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>Perfil do Usuário</title>
    <style>
        body {
            background-color: rgb(28, 28, 28);
            color: aliceblue;
        }
        
        .container {
            background-color: rgb(28, 28, 28);
            padding: 20px;
            border-radius: 5px;
        }

        .table-custom {
            background-color: rgb(45, 45, 45); /* Cor de fundo da tabela */
            color: white; /* Cor do texto da tabela */
            border-collapse: collapse; /* Para remover espaços entre as células */
        }

        .table-custom th, .table-custom td {
            padding: 10px; /* Espaçamento interno nas células */
            border: 1px solid rgb(60, 60, 60); /* Bordas das células */
        }

        .table-custom tbody tr:nth-child(odd) {
            background-color: rgb(60, 60, 60); /* Cor de fundo para linhas ímpares */
        }
    </style>
</head>
<body>
<nav class="w-full flex justify-center bg-black py-4 shadow-md">
    <div class="max-w-screen-xl w-full flex items-center justify-between h-20">
        <h1 class="flex-1 text-white font-s">
            <img src="/img/logo.svg" alt="Logo" onclick="window.location.href='/'" style="cursor: pointer;" />
        </h1>
        <ul class="flex gap-4">
            <li>
                <button onclick="window.location.href='/profile'" class="px-5 py-1 bg-white text-black rounded-xl transition-transform duration-300 transform hover:scale-105 hover:bg-gray-100 md:text-lg">
                    Perfil
                </button>
            </li>
            <li>
                <button onclick="window.location.href='/agendamento'" class="px-5 py-1 bg-zinc-900 text-white rounded-xl transition-transform duration-300 transform hover:scale-105 hover:bg-zinc-800 md:text-lg">
                    Agendar Evento
                </button>
            </li>
        </ul>
    </div>
</nav>

<div class="container mt-5">
    <h2>Bem-vindo, {{username}}</h2>
    
    {{#if success_msg}}
    <div class="alert alert-success">
        {{success_msg}}
    </div>
    {{/if}}
    {{#if error_msg}}
    <div class="alert alert-danger">
        {{error_msg}}
    </div>
    {{/if}}

    <h4>Seus Agendamentos</h4>
    
    {{#if events.length}}
    <table class="table-custom">
        <thead>
            <tr>
                <th>Título</th>
                <th>Data</th>
                <th>Hora</th>
                <th>Profissional</th>
                <th>Ação</th>
            </tr>
        </thead>
        <tbody>
            {{#each events}}
            <tr>
                <td>{{this.title}}</td>
                <td>{{this.start}}</td>
                <td>{{this.hora}}</td>
                <td>{{this.professionalName}}</td>
                <td>
                    {{#if (canCancel this.start)}}
                    <form action="/delete-event-user/{{this.id}}" method="POST">
                        <button type="submit" class="btn btn-danger">Cancelar</button>
                    </form>
                    {{else}}
                    <button class="btn btn-secondary" disabled>Não pode cancelar</button>
                    {{/if}}
                </td>
            </tr>
            {{/each}}
        </tbody>
    </table>
    {{else}}
    <p>Você não tem agendamentos.</p>
    {{/if}}

    <a href="/agendamento" class="btn btn-primary">Agendar Novo Evento</a>
    <a href="/logout" class="btn btn-secondary">Logout</a>
</div>

<script src="https://code.jquery.com/jquery-3.5.2.slim.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sorts+Mill+Goudy:ital@0;1&display=swap" rel="stylesheet"/>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <title>Cadastro - Patty Nails</title>
</head>
<body>
    {{> header1}}

    <div class="min-h-screen flex items-center justify-center bg-black w-full p-5">
        <div class="bg-zinc-500/10 flex rounded-2xl shadow-lg max-w-2xl w-full mt-28 gap-4 md:flex md:min-h-full">
            <!-- Coluna do Formulário -->
            <div class="p-8 w-full md:w-1/2 flex justify-center items-center">
                <div class="w-full">
                    <h2 class="font-bold text-2xl text-white text-center md:text-left">Cadastrar</h2>
                    <p class="text-xs mt-4 text-white text-center md:text-left">Agende seu serviço facilmente.</p>
                    <form action="/cadastrar" method="POST" class="flex flex-col gap-4 mt-4" id="cadastroForm">
                        <input class="p-2 rounded-xl border" type="text" name="nome" id="nome" placeholder="Nome" required>
                        <input class="p-2 rounded-xl border" type="tel" name="telefone" id="telefone" placeholder="(00) 00000-0000" required>
                        <input class="p-2 rounded-xl border" type="email" name="email" id="email" placeholder="Email" required>
                        <div class="relative">
                            <input class="p-2 rounded-xl border w-full" placeholder="Senha" type="password" name="senha" id="senha" required>
                            <span class="absolute right-2 top-2 cursor-pointer" onclick="togglePasswordVisibility()">
                                <i id="eyeIcon" class="bi bi-eye"></i>
                            </span>
                        </div>
                        <button type="submit" class="bg-black rounded-xl text-white py-2 hover:scale-105 duration-300">Cadastrar</button>
                    </form>
                </div>
            </div>

            <!-- Coluna da Imagem -->
            <div class="md:w-1/2 hidden md:block">
                <img class="rounded-r-2xl w-full h-full object-cover" src="https://img.freepik.com/fotos-gratis/mulher-cuidando-das-unhas_23-2148974583.jpg?t=st=1727392135~exp=1727395735~hmac=6ceb587424adfdf618c335e08de5da3f124326ee7879732bc34e2bc9c76c7723&w=740" alt="Imagem de Cadastro">
            </div>
        </div>
    </div>

    <script>
        // Função para formatar o telefone
        document.getElementById('telefone').addEventListener('input', function (e) {
            let telefone = e.target.value.replace(/\D/g, ""); // Remove todos os caracteres que não são números
            if (telefone.length > 11) {
                telefone = telefone.slice(0, 11); // Limita o número a 11 dígitos
            }

            // Formata o número para (XX) XXXXX-XXXX
            telefone = telefone.replace(/^(\d{2})(\d)/g, "($1) $2"); 
            telefone = telefone.replace(/(\d{5})(\d)/, "$1-$2");
            e.target.value = telefone;
        });

        // Função para validar o número de telefone e senha
        document.getElementById('cadastroForm').addEventListener('submit', function (e) {
            const telefone = document.getElementById('telefone').value.replace(/\D/g, ""); // Remove formatação para contar dígitos
            const senha = document.getElementById('senha').value;

            // Validação do telefone
            if (telefone.length !== 11) {
                alert("O telefone deve conter 11 dígitos.");
                e.preventDefault(); // Impede o envio do formulário se inválido
                return;
            }

            // Validação da senha
            if (senha.length < 6) {
                alert("A senha deve conter no mínimo 6 caracteres.");
                e.preventDefault();
            }
        });

        // Função para alternar a visibilidade da senha
        function togglePasswordVisibility() {
            var senhaInput = document.getElementById("senha");
            var eyeIcon = document.getElementById("eyeIcon");

            if (senhaInput.type === "password") {
                senhaInput.type = "text"; // Mostra a senha
                eyeIcon.classList.remove("bi-eye");
                eyeIcon.classList.add("bi-eye-slash"); // Troca para o ícone de olho fechado
            } else {
                senhaInput.type = "password"; // Oculta a senha
                eyeIcon.classList.remove("bi-eye-slash");
                eyeIcon.classList.add("bi-eye"); // Volta para o ícone de olho aberto
            }
        }
    </script>
</body>
</html>
